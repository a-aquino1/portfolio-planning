---
title: "portfolio-planning"
---

## Data Description

1.  The data source for the data I will be exploring, Global Holidays and Travel, comes from the article "Global holiday datasets for Understanding seasonal human mobility and population dynamics" by Shengjie Lai (et al). The data is accessible though the WorldPop project and through Github.

2.  The Global Holiday Dataset contains structured data based on public and school holidays along with the airline passenger statistics. The variables are broken down as followed:

    global_holidays.csv

    -   ADM_name (string)

    -   ISO3 (String)

    -   Date (date)

    -   Name (String)

    -   Type (String)

    monthly_passengers.csv

    -   ISO3 (String)

    -   Year (integer)

    -   Month (integer)

    -   Total (double)

    -   Domestic (double)

    -   International (double)

    -   Total_OS (double)

3.  Research Questions:

    1.  Do school holidays influence travel patterns more than public holidays?
    2.  How do passenger numbers oscillate around major U.S holidays?
    3.  Do certain states or cities experience a greater travel surge on specific holidays?

### Data Visualization

1.  I want to focus on highlighting the correlations between holidays and travel patterns. I want to include multiple visuals of my chosen questions by incorporating the proper graph for each question.
2.  What do you want to highlight on your final visualizations in your research questions? How do you plan to do that? : I want to to ultimately include various visuals in my project. I want to include a bar graph to present a visual that compares the travel patterns of school holiday vs. public holidays. To visualize the oscillating numbers of passengers around holidays I would use a histogram and to visualize the surge of travel time around the holidays I would use a bar chart.
3.  what is missing from your data or would need to change in your data to create these visualization : I want to mainly focus on U.S holidays so I will need to manipulate the data to only include U.S holidays. Additionally I will need to specifically determine the daily passenger data.

### Data Cleaning

1.  Yes, I may need to reformat variables into different types such as converting holiday and flight dates into standard date format. Since I will be focusing on U.S holidays I will need to remove any international holiday that is not recognized in the U.S.
2.  I don't believe I will need to deal with missing data.
3.  Yes I will need to filter my data. Since I only want to focus on U.S holidays and their relevant flight patterns I will need to remove all the rows not related to U.S holidays. I will also need to ensure that I only work with data that focuses on flight patterns in the U.S, excluding any that are non-U.S countries. I will also need to filter the Holiday types into school or public holidays. Additionally I will need to filter airports that have a certain passenger capacity.
4.  Yes, I will need to create new variables such as the change in passenger size during holidays by finding the difference in holiday passenger size and normal passenger size.
5.  Yes, I think I may need to join my data since I am given to data sets.
6.  Yes, I can exclude the variables that to not pertain to any U.S base, whether it be holiday or airport travel pattern.
7.  I do not believe I will need to pivot my data in any way.
8.  Yes, I will need to summarize some variables such as the passenger size to determine the difference during school holiday, public holiday, and regular travel motion. I will need to determine the total passenger size by month. To determine the travel surge I will need to do something similar and find the percentage by finding the difference of passenger size during holidays and normal size before dividing it by the normal size and multiplying it by 100 to get a percentage. Lastly I will need to identify the highest passenger size before and after holidays.
9.  I don't believe I need to fix any additional aspect of my data to create my data visualizations.

```{r}
#| label: global-holiday-and-travel-data
#| echo: FALSE
library(tidyverse)
library(withr)

url <- "https://data.worldpop.org/GIS/Holiday_Data/public_holidays/public_holidays_2010_2019.zip"
path <- withr::local_tempfile(fileext = ".zip")
download.file(url, path)
global_holidays <- readr::read_csv(path) |> 
  dplyr::mutate(Date = lubridate::dmy(Date))


url <- "https://data.worldpop.org/GIS/Flight_Data/monthly_volume_of_airline_passengers/monthly_vol_of_airline_pass_in_90_countries_2010_2018.zip"
path <- withr::local_tempfile(fileext = ".zip")
download.file(url, path)
monthly_passengers <- readr::read_csv(path) |>
  dplyr::mutate(
    dplyr::across(c(Year, Month), as.integer)
  )
```

## Data Cleaning and Preparation

```{r}
#| label: U.S-holidays
global_holidays_cleaned <- global_holidays |>
  filter(ISO3 == "USA", 
         Type == "Public holiday") |>
  mutate(Year = year(Date), 
         Month = month(Date))

print(global_holidays_cleaned)
#filtered out the US holidays only as I want to mainly focus on US based holidays to narrow the data.

```

hfhfb

```{r}
#| label: us-passengers
 
monthly_passengers_cleaned <- monthly_passengers |>
  filter(ISO3 == "USA")
  
  
print(monthly_passengers_cleaned)

#filtered to get only us passengers
```

Since there was no recognized school holidays, as every school districts have their own calenar system, I chose to make a list of the most notable school break and vaugly when they are present or "celebrated"Since there was no recognized school holidays, as every school districts have their own calendar system, I chose to make a list of the most notable school break and vaugely when they are present or "celebrated"

```{r}
#| label: us_school_holidays
us_school_breaks <- list("Spring Break" = "March",
                         "Summmer Vacation" = "June-August", 
                         "Thanksgiving Break" = "November",
                         "Winter Break" = "December-January")

print(us_school_breaks)

#created a list of the four major school breaks and its vauge data to account for the different school calendars.

```

### Explanation:

I wanted to focus on filtering the data I will mainly be working with such as working only with US based holiday data to connect it to relevant flight patterns. Additionally since I want to be comparing the flight patterns and how whether public or school holidays create a greater surge of passengers I decided to filter out the public holidays. As every school district follows a different calendar systems and may have unique holidays, I decided to make a list of the four major schools breaks that students may experience. As stated before since schools have dfferent calendars I decided to be vague on wen these breaks occur, an not focus on specifics since every school have different academic calendars.

## Travel Trends by Holiday Type

```{r}
#| label: travel-trends-by-school-holiday

travel_trend <- monthly_passengers_cleaned |>
  left_join(global_holidays_cleaned, by = c("ISO3",
                                            "Year",
                                            "Month")) |>
  mutate(Holiday_type = case_when(Month %in% c(3,4) ~ "Spring Break",
                                    Month %in% c(6:8)~"Summer Break",
                                    Month %in% c(11) ~ "Fall Break",
                                    Month %in% c(12, 1)~ "Winter Break", 
                                    Type == "Public holiday" ~ "Public holiday")) |>
  group_by(Holiday_type) |>
summarize(across(c(Total, Domestic, International, Total_OS), mean, na.rm = TRUE))|>
  arrange(desc(Total))

print(travel_trend)
  
# search up how to include my makeshift school breaks.\/holidays into the data and how to determine the dates. Looked into if-else and case_whne in the Rstudio book.
  
```

#### Travel Trend

```{r}
#| label: travel-trends

ggplot(travel_trend, aes(x = Holiday_type, 
                         y = Total,
                         fill = Holiday_type)) +
  geom_bar(stat = "identity", show.legend = FALSE) +
  labs(title = "Passenger Travel Trends: School vs. Public Holidays",
       x = "Holiday Type",
       y = "Average Monthly Passengers") +
  scale_y_continuous(breaks = seq(20000,80000, by = 20000 )) +
  theme_bw()
```

## How Passenger Numbers Fluctuate Around Major U.S Holidays

Solely focusing on the most major holidays celebrated in the U.S we can determine the average passengers that traveled. Additionally choosing to not include the day after or before was a choice made to be able to determine how many travel the day of the major holiday.

```{r}
#| label: major-holiday-passenger-numbers

major_holiday_trend <- monthly_passengers_cleaned |>
  left_join(global_holidays_cleaned, by = c("Year",
                                            "Month")) |>
  filter(Name %in% c("Thanksgiving Day",
                     "Christmas Day",
                     "New Year's Day",
                     "Independence Day",
                     "Memorial Day",
                     "Labor Day")) |>
  
  group_by(Month) |>
  summarize(avg_passengers = mean(Total, na.rm = TRUE))



print(major_holiday_trend)
  


```

By excluding the major holidays celebrated in the United States then well will be able to obtain the average or normal rate of passengers traveled.

```{r}
#| lable: normal-passenger-numbers

normal_passenger_trends <- monthly_passengers_cleaned |>
  left_join(global_holidays_cleaned, by = c("Year", "Month")) |>
  filter(!Name %in% c("Thanksgiving Day",
                     "Christmas Day",
                     "New Year's Day",
                     "Independence Day",
                     "Memorial Day",
                     "Labor Day")) |>
  group_by(Month) |>
  summarize(avg_passengers = mean(Total, na.rm = TRUE))

print(normal_passenger_trends)

```

Now comparing the normal travel trend with the major holiday trend to see how many travel the day of and how it compares to the other days.

```{r}
#| label: holiday-vs-normal_trend


```
